@inject NavigationManager NavigationManager

@page "/storage"
@using PokeApiNet

<PageTitle>Pokémon Storage</PageTitle>

<MudPaper Height="calc(100vh - 110px)" Style="position: relative; overflow:hidden;">
    <MudDrawerContainer Class="mud-height-full">
        <MudDrawer @bind-Open="@openAddPokemonDrawer" Anchor="Anchor.End" Fixed="false" Elevation="0" Variant="@DrawerVariant.Persistent">
            <PokemonCard OnUpdated="Update" IsStorageCard="true" />
        </MudDrawer>
        <MudButton OnClick="ToggleOpenAddPokemonDrawer" Variant="Variant.Outlined" EndIcon="@Icons.Material.Filled.ArrowDropDown" Color="Color.Primary" Class="expand-button">Add Pokémon</MudButton>
        <StorageBox @ref="_storageBox"/>
    </MudDrawerContainer>
</MudPaper>

@code {
    StorageBox? _storageBox;

    bool openAddPokemonDrawer = false;

    public void ToggleOpenAddPokemonDrawer()
    {
        openAddPokemonDrawer = !openAddPokemonDrawer;
    }

    public void Update()
    {
        StateHasChanged();
        _storageBox?.Refresh();
    }
}
